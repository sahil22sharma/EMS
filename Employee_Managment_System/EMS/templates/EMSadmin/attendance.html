{% extends 'EMSadmin/base.html' %}
{% block content %}
{% load static %}

<div class="dash-content">
    <div class="activity">

        <div class="title">
            <span class="text">Attendance</span>
        </div>

        <!-- Date Filter Form -->
        <form method="get" action="">
            <label for="date">Filter by Date:</label>
            <input type="date" id="date" name="date" value="{{ filter_date }}">
            <button type="submit">Filter</button>
        </form>

        <!-- Export Button -->
        <form method="get" action="">
            <input type="hidden" name="date" value="{{ filter_date }}">  <!-- Retain the selected date -->
            <button type="submit" name="export" value="true">Export to Excel</button>
        </form>

        {% if e1 %}
        <div class="activity-data">
            <table class="table">
                <thead>
                    <th class="data-title">Name</th>
                    <th class="data-title">Date</th>
                    <th class="data-title">Login Time</th>
                    <th class="data-title">Logout Time</th>
                    <th class="data-title">Status</th>
                </thead>
                {% for i in e1 %}
                <tbody>
                    <td class="data-list">{{ i.user.get_full_name }}</td>
                    <td class="data-list">{{ i.date }}</td>
                    <td class="data-list">{{ i.loginTime }}</td>
                    <td class="data-list">{{ i.logoutTime }}</td>
                    <td class="data-list">{{ i.status }}</td>
                </tbody>
                {% endfor %}
            </table>
        </div>
        {% else %}
        <p>No attendance records found for this date.</p>
        {% endif %}
    </div>
</div>

{% endblock %}
